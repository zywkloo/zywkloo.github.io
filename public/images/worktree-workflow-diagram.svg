<svg width="900" height="520" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520">
  <defs>
    <linearGradient id="strongBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#7c3aed;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="fastBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ea580c;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mixBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0ea5e9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0284c7;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#0f172a" rx="12"/>

  <!-- Title -->
  <text x="450" y="40" font-family="Inter, system-ui, sans-serif" font-size="22" fill="#e2e8f0" text-anchor="middle" font-weight="bold">The 6-Step Refactor Workflow</text>

  <!-- Legend -->
  <rect x="250" y="56" width="14" height="14" rx="3" fill="url(#strongBg)"/>
  <text x="270" y="68" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#c4b5fd">Strong Model (Opus)</text>
  <rect x="400" y="56" width="14" height="14" rx="3" fill="url(#fastBg)"/>
  <text x="420" y="68" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#fdba74">Fast Model (Sonnet/Haiku)</text>
  <rect x="580" y="56" width="14" height="14" rx="3" fill="url(#mixBg)"/>
  <text x="600" y="68" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#7dd3fc">Mix / Review</text>

  <!-- Flow arrow backbone -->
  <line x1="450" y1="100" x2="450" y2="500" stroke="#334155" stroke-width="3" stroke-dasharray="8 4"/>

  <!-- Step 1: Map the territory -->
  <rect x="40" y="90" width="350" height="60" rx="10" fill="url(#strongBg)" filter="url(#shadow)"/>
  <text x="56" y="115" font-family="Inter, system-ui, sans-serif" font-size="15" fill="#ede9fe" font-weight="bold">Step 1: Map the Territory</text>
  <text x="56" y="137" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#c4b5fd">Dependencies, pain points, invariants, step plan</text>
  <!-- Worktree label -->
  <rect x="510" y="103" width="130" height="30" rx="6" fill="#1e293b" stroke="#475569" stroke-width="1"/>
  <text x="575" y="123" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#94a3b8" text-anchor="middle">on main (read-only)</text>

  <!-- Arrow -->
  <polygon points="450,158 444,168 456,168" fill="#475569"/>

  <!-- Step 2: Safety nets -->
  <rect x="40" y="170" width="350" height="60" rx="10" fill="url(#mixBg)" filter="url(#shadow)"/>
  <text x="56" y="195" font-family="Inter, system-ui, sans-serif" font-size="15" fill="#e0f2fe" font-weight="bold">Step 2: Add Safety Nets</text>
  <text x="56" y="217" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#7dd3fc">Write tests (fast), review them (strong)</text>
  <rect x="510" y="183" width="130" height="30" rx="6" fill="#1e293b" stroke="#475569" stroke-width="1"/>
  <text x="575" y="203" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#94a3b8" text-anchor="middle">on main</text>

  <!-- Arrow -->
  <polygon points="450,238 444,248 456,248" fill="#475569"/>

  <!-- Step 3: Spike -->
  <rect x="40" y="250" width="350" height="60" rx="10" fill="url(#strongBg)" filter="url(#shadow)"/>
  <text x="56" y="275" font-family="Inter, system-ui, sans-serif" font-size="15" fill="#ede9fe" font-weight="bold">Step 3: Spike It</text>
  <text x="56" y="297" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#c4b5fd">Prove approach, validate structure, throw away if wrong</text>
  <rect x="510" y="263" width="160" height="30" rx="6" fill="#1e293b" stroke="#10b981" stroke-width="1.5"/>
  <text x="590" y="283" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#6ee7b7" text-anchor="middle">wt-spike (throwaway)</text>
  <!-- X mark -->
  <line x1="700" y1="268" x2="716" y2="284" stroke="#ef4444" stroke-width="2" stroke-linecap="round"/>
  <line x1="716" y1="268" x2="700" y2="284" stroke="#ef4444" stroke-width="2" stroke-linecap="round"/>

  <!-- Arrow -->
  <polygon points="450,318 444,328 456,328" fill="#475569"/>

  <!-- Step 4: Execute -->
  <rect x="40" y="330" width="350" height="60" rx="10" fill="url(#fastBg)" filter="url(#shadow)"/>
  <text x="56" y="355" font-family="Inter, system-ui, sans-serif" font-size="15" fill="#fff7ed" font-weight="bold">Step 4: Execute the Refactor</text>
  <text x="56" y="377" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#fdba74">Codemods, file moves, imports — small commits</text>
  <rect x="510" y="343" width="130" height="30" rx="6" fill="#1e293b" stroke="#f97316" stroke-width="1.5"/>
  <text x="575" y="363" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#fdba74" text-anchor="middle">wt-refactor</text>

  <!-- Arrow -->
  <polygon points="450,398 444,408 456,408" fill="#475569"/>

  <!-- Step 5: Stabilize -->
  <rect x="40" y="410" width="350" height="60" rx="10" fill="url(#strongBg)" filter="url(#shadow)"/>
  <text x="56" y="435" font-family="Inter, system-ui, sans-serif" font-size="15" fill="#ede9fe" font-weight="bold">Step 5: Stabilize</text>
  <text x="56" y="457" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#c4b5fd">Fix regressions, check API compat, behavior parity</text>
  <rect x="510" y="423" width="130" height="30" rx="6" fill="#1e293b" stroke="#f97316" stroke-width="1.5"/>
  <text x="575" y="443" font-family="Inter, system-ui, sans-serif" font-size="12" fill="#fdba74" text-anchor="middle">wt-refactor</text>

  <!-- Arrow to merge -->
  <polygon points="450,478 444,488 456,488" fill="#10b981"/>

  <!-- Step 6: Clean up & Merge -->
  <rect x="165" y="490" width="570" height="24" rx="6" fill="#1e293b" stroke="#10b981" stroke-width="1.5"/>
  <text x="450" y="507" font-family="Inter, system-ui, sans-serif" font-size="13" fill="#6ee7b7" text-anchor="middle" font-weight="bold">Step 6: Clean up (fast model) → Merge to main</text>
</svg>
